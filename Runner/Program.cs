// See https://aka.ms/new-console-template for more information

using System.Globalization;
using Apis.Networks;

var nn = new FeedForward(new double[2][,]
{
    new double[,]
    {
        {
            5.384153013111582, 6.479626588485177, 5.763809378907092, 5.910871382946858, 3.3741798979736397,
            7.084170884194504, -3.450173697734283, -3.4969134556948527, -3.3886606065212095, -6.68587503365906,
            -6.329946104223533, 3.9920670008187025
        },
        {
            5.986040376764663, 6.734291163238215, 6.444793785814286, -2.4020372935492267, 2.442366505228752,
            5.082400349857528, -0.02781910764234845, -3.344519334646911, 6.3535923329670085, -4.323964053742007,
            6.191953582206558, 0.0764989941110686
        },
        {
            -3.387501896675123, -8.776387167552494, -4.9328050722405825, -4.017784403687896, 1.4347268382904323,
            -6.887979398907095, 3.044123492724529, 3.7375482798919135, -4.815584716582579, -1.517813369610953,
            -7.4561845646275, 0.7273516168742314
        },
        {
            -2.3037257753277363, 6.790999580824065, 5.9797672982443055, 6.0042384676345355, 2.5486777601940243,
            5.162411117201233, -2.442724384961334, 6.708998697173408, 6.008722834594745, 6.41065530600041,
            5.094917554140164, 2.795272972468102
        },
        {
            -4.537235684919555, -8.777245501892244, -4.01304261503122, -5.057583518816868, 2.406510877831016,
            2.8943825326378327, 1.1265113805418905, 3.786278390709658, -5.107878205306824, 5.81404853042134,
            -6.9254084885712075, -4.713633911888311
        },
        {
            5.696347116488339, 6.662353717267437, -3.236315890955015, 6.115715077877152, 3.195019578669262,
            -5.553606975766266, -3.838550505740021, -3.3957044030878336, 5.8448033023864125, -5.918893812968458,
            6.640665169684689, 3.2522194497520855
        },
    },
    new double[,]
    {
        { -9.393269020864086 },
        { 16.01513124586389 },
        { -13.24096094908646 },
        { -10.29074325016363 },
        { 4.92558079906209 },
        { 9.55646966226081 },
        { -5.513107558143805 },
        { 5.558999130331298 },
        { -13.002196127178053 },
        { -9.397630171972208 },
        { 9.564952692223288 },
        { 5.960484566494969 },
    },
});

for (var i = 0; i < 64; i++)
{
    var num = i;
    var input = new double[6];
    var cnt = 0;
    var bin = "";
    for (var j = 0; j < 6; j++)
    {
        var d = (num >> j) % 2;
        input[j] = d;
        bin += d;
        if (d == 1)
            cnt += 1;
    }

    var res = nn.EvaluateSingle(input);
    var round = res.Select(d => ((int)Math.Round(d)).ToString(CultureInfo.InvariantCulture)).First();
    Console.WriteLine($"{cnt % 2}:{bin}:{round}");
    // Console.WriteLine(string.Join(", ", ));
}
// Console.WriteLine(string.Join(", ",
//     new[] { 0d, 1 }.Times(nn.Weights[0]).Select(d => d.ToString(CultureInfo.InvariantCulture))));

// Console.WriteLine(nn.LearnOn(new double[1][] { new[] { 0d, 1 } }, new double[1][] { new[] { 1d, 0 } }, 0.001));